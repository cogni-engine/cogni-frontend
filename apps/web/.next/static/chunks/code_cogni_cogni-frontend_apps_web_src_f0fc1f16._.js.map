{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/glass-card/GlassCard.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport type GlassCardProps = React.HTMLAttributes<HTMLDivElement>;\n\nconst GlassCard = React.forwardRef<HTMLDivElement, GlassCardProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'bg-white/8 backdrop-blur-xl transition-all duration-300 border border-black shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)] hover:shadow-[0_12px_40px_rgba(0,0,0,0.25),inset_0_1px_0_rgba(255,255,255,0.18)]',\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nGlassCard.displayName = 'GlassCard';\n\nexport default GlassCard;\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,0BAAY,+ZAAgB,MAChC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,ibAAC;QACC,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,0OACA;QAED,GAAG,KAAK;;;;;;;;AAKf,UAAU,WAAW,GAAG;uCAET","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/notes/components/NoteList.tsx"],"sourcesContent":["'use client';\n\nimport Image from 'next/image';\nimport { useRef, memo } from 'react';\n\nimport GlassCard from '@/components/glass-card/GlassCard';\n\ntype NoteListItem = {\n  id: string;\n  title: string;\n  date: string;\n  preview: string;\n  workspace?: {\n    id: number;\n    title: string;\n    type: 'group' | 'personal';\n    icon_url?: string | null;\n  };\n  isGroupNote?: boolean;\n  updated_at: string;\n  deleted_at?: string | null;\n};\n\ntype NoteListProps = {\n  notes: NoteListItem[];\n  onNoteClick?: (id: string) => void;\n  onContextMenu?: (e: React.MouseEvent, id: string, isDeleted: boolean) => void;\n};\n\ntype GroupedNotes = {\n  [key: string]: NoteListItem[];\n};\n\nfunction getTimeGroup(dateString: string): string {\n  const now = new Date();\n  const date = new Date(dateString);\n\n  // Reset time to midnight for date comparison\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n  const noteDate = new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate()\n  );\n\n  // Today\n  if (noteDate.getTime() === today.getTime()) {\n    return '今日';\n  }\n\n  // This week (last 7 days)\n  const weekAgo = new Date(today);\n  weekAgo.setDate(weekAgo.getDate() - 7);\n  if (noteDate > weekAgo) {\n    return '今週';\n  }\n\n  // This month\n  if (\n    date.getMonth() === now.getMonth() &&\n    date.getFullYear() === now.getFullYear()\n  ) {\n    return '今月';\n  }\n\n  // Previous months in the same year\n  if (date.getFullYear() === now.getFullYear()) {\n    return `${date.getMonth() + 1}月`;\n  }\n\n  // Previous years\n  return `${date.getFullYear()}年`;\n}\n\nfunction groupNotesByTime(notes: NoteListItem[]): GroupedNotes {\n  const grouped: GroupedNotes = {};\n\n  notes.forEach(note => {\n    const group = getTimeGroup(note.updated_at);\n    if (!grouped[group]) {\n      grouped[group] = [];\n    }\n    grouped[group].push(note);\n  });\n\n  return grouped;\n}\n\nfunction sortGroupKeys(keys: string[]): string[] {\n  const order = ['今日', '今週', '今月'];\n\n  return keys.sort((a, b) => {\n    // Priority order\n    const aIndex = order.indexOf(a);\n    const bIndex = order.indexOf(b);\n\n    if (aIndex !== -1 && bIndex !== -1) {\n      return aIndex - bIndex;\n    }\n    if (aIndex !== -1) return -1;\n    if (bIndex !== -1) return 1;\n\n    // Month comparison (e.g., \"10月\", \"11月\")\n    const aMonth = a.match(/^(\\d+)月$/);\n    const bMonth = b.match(/^(\\d+)月$/);\n    if (aMonth && bMonth) {\n      return parseInt(bMonth[1]) - parseInt(aMonth[1]); // Descending\n    }\n\n    // Year comparison (e.g., \"2024年\", \"2023年\")\n    const aYear = a.match(/^(\\d+)年$/);\n    const bYear = b.match(/^(\\d+)年$/);\n    if (aYear && bYear) {\n      return parseInt(bYear[1]) - parseInt(aYear[1]); // Descending\n    }\n\n    // Months come before years\n    if (aMonth) return -1;\n    if (bMonth) return 1;\n\n    return 0;\n  });\n}\n\nexport default function NoteList({\n  notes,\n  onNoteClick,\n  onContextMenu,\n}: NoteListProps) {\n  const groupedNotes = groupNotesByTime(notes);\n  const sortedGroups = sortGroupKeys(Object.keys(groupedNotes));\n\n  // Note card component with touch handlers - memoized to prevent flickering\n  const NoteCardComponent = ({ note }: { note: NoteListItem }) => {\n    const touchTimerRef = useRef<NodeJS.Timeout | null>(null);\n    const touchStartRef = useRef<{ x: number; y: number } | null>(null);\n    const isDeleted = !!note.deleted_at;\n\n    const handleTouchStart = (e: React.TouchEvent) => {\n      const touch = e.touches[0];\n      touchStartRef.current = { x: touch.clientX, y: touch.clientY };\n\n      // Start long press timer\n      touchTimerRef.current = setTimeout(() => {\n        // Trigger context menu after 500ms\n        if (onContextMenu) {\n          onContextMenu(\n            {\n              preventDefault: () => {},\n              clientX: touch.clientX,\n              clientY: touch.clientY,\n            } as React.MouseEvent,\n            note.id,\n            isDeleted\n          );\n        }\n      }, 500);\n    };\n\n    const handleTouchMove = (e: React.TouchEvent) => {\n      // Cancel long press if user moves finger too much\n      if (touchStartRef.current && touchTimerRef.current) {\n        const touch = e.touches[0];\n        const deltaX = Math.abs(touch.clientX - touchStartRef.current.x);\n        const deltaY = Math.abs(touch.clientY - touchStartRef.current.y);\n\n        if (deltaX > 10 || deltaY > 10) {\n          clearTimeout(touchTimerRef.current);\n          touchTimerRef.current = null;\n        }\n      }\n    };\n\n    const handleTouchEnd = () => {\n      // Clear the timer if touch ends before long press threshold\n      if (touchTimerRef.current) {\n        clearTimeout(touchTimerRef.current);\n        touchTimerRef.current = null;\n      }\n      touchStartRef.current = null;\n    };\n\n    const handleClick = () => {\n      if (!isDeleted && onNoteClick) {\n        onNoteClick(note.id);\n      }\n    };\n\n    const handleContextMenuEvent = (e: React.MouseEvent) => {\n      if (onContextMenu) {\n        onContextMenu(e, note.id, isDeleted);\n      }\n    };\n\n    return (\n      <GlassCard\n        className={`group relative rounded-[20px] px-5 py-[8px] cursor-pointer select-none ${\n          isDeleted ? 'opacity-60' : ''\n        }`}\n        onClick={handleClick}\n        onContextMenu={handleContextMenuEvent}\n        onTouchStart={handleTouchStart}\n        onTouchMove={handleTouchMove}\n        onTouchEnd={handleTouchEnd}\n        onTouchCancel={handleTouchEnd}\n      >\n        <div className='flex justify-between items-start gap-3 mb-1'>\n          <div className='flex-1 min-w-0'>\n            <h2 className='font-semibold text-white text-[17px] leading-[1.4] line-clamp-2'>\n              {note.title}\n            </h2>\n            {note.isGroupNote && note.workspace?.title && (\n              <div className='flex items-center gap-1.5 mt-1'>\n                {note.workspace.icon_url ? (\n                  <Image\n                    src={note.workspace.icon_url}\n                    alt={note.workspace.title}\n                    width={16}\n                    height={16}\n                    className='w-4 h-4 rounded-md object-cover'\n                  />\n                ) : (\n                  <div className='w-4 h-4 rounded-md bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-[8px] text-white font-bold'>\n                    {note.workspace.title.charAt(0).toUpperCase()}\n                  </div>\n                )}\n                <span className='text-[11px] text-purple-300'>\n                  {note.workspace.title}\n                </span>\n              </div>\n            )}\n          </div>\n          <span className='text-[11px] text-gray-400 whitespace-nowrap mt-0.5'>\n            {note.date}\n          </span>\n        </div>\n        <p className='text-[13px] text-gray-400 leading-[1.6] line-clamp-2'>\n          {note.preview}\n        </p>\n      </GlassCard>\n    );\n  };\n\n  const NoteCard = memo(NoteCardComponent);\n\n  return (\n    <div className='flex flex-col gap-6'>\n      {sortedGroups.map(group => (\n        <div key={group}>\n          {/* Group Header */}\n          <h3 className='text-sm font-medium text-gray-400 mb-3 px-1'>\n            {group}\n          </h3>\n          {/* Notes in this group */}\n          <div className='flex flex-col gap-[14px]'>\n            {groupedNotes[group].map(note => (\n              <NoteCard key={note.id} note={note} />\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/lib/api/notesApi.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/browserClient';\nimport type { Note } from '@/types/note';\n\nconst supabase = createClient();\n\n/**\n * Parse note text into title and content\n * First line is title, rest is content\n */\nexport function parseNoteText(text: string): {\n  title: string;\n  content: string;\n} {\n  const lines = text.split('\\n');\n  const title = lines[0] || 'Untitled';\n  const content = lines.slice(1).join('\\n');\n  return { title, content };\n}\n\n/**\n * Combine title and content into text format for storage\n */\nexport function combineNoteText(title: string, content: string): string {\n  return `${title}\\n${content}`;\n}\n\n/**\n * Get all notes for a specific workspace with assignments\n * @param workspaceId - The workspace ID\n * @param includeDeleted - Include soft-deleted notes (default: true)\n */\nexport async function getNotes(\n  workspaceId: number,\n  includeDeleted = true\n): Promise<Note[]> {\n  let query = supabase\n    .from('notes')\n    .select(\n      `\n      *,\n      workspace_member_note(\n        workspace_member_note_role,\n        workspace_member:workspace_member_id(\n          id,\n          user_id,\n          user_profiles!user_id(id, name, avatar_url)\n        )\n      )\n    `\n    )\n    .eq('workspace_id', workspaceId);\n\n  // Filter by deleted_at if not including deleted\n  if (!includeDeleted) {\n    query = query.is('deleted_at', null);\n  }\n\n  const { data, error } = await query.order('updated_at', { ascending: false });\n\n  if (error) throw error;\n\n  // Transform the nested structure to match our types\n  return (data || []).map(note => ({\n    ...note,\n    workspace_member_note: (note.workspace_member_note || []).map(\n      (assignment: { workspace_member?: { user_profiles?: unknown } }) => ({\n        ...assignment,\n        workspace_member: assignment.workspace_member\n          ? {\n              ...assignment.workspace_member,\n              user_profiles: Array.isArray(\n                assignment.workspace_member.user_profiles\n              )\n                ? assignment.workspace_member.user_profiles[0]\n                : assignment.workspace_member.user_profiles,\n            }\n          : undefined,\n      })\n    ),\n  }));\n}\n\n/**\n * Get a single note by ID\n */\nexport async function getNote(id: number): Promise<Note | null> {\n  const { data, error } = await supabase\n    .from('notes')\n    .select('*')\n    .eq('id', id)\n    .single();\n\n  if (error) {\n    if (error.code === 'PGRST116') {\n      // Not found\n      return null;\n    }\n    throw error;\n  }\n\n  return data;\n}\n\n/**\n * Create a new note\n */\nexport async function createNote(\n  workspaceId: number,\n  title: string,\n  content: string\n): Promise<Note> {\n  const text = combineNoteText(title, content);\n\n  const { data, error } = await supabase\n    .from('notes')\n    .insert({\n      workspace_id: workspaceId,\n      text,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Update an existing note\n */\nexport async function updateNote(\n  id: number,\n  title: string,\n  content: string\n): Promise<Note> {\n  const text = combineNoteText(title, content);\n\n  const { data, error } = await supabase\n    .from('notes')\n    .update({\n      text,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('id', id)\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Soft delete a note (move to trash)\n */\nexport async function softDeleteNote(id: number): Promise<Note> {\n  const { data, error } = await supabase\n    .from('notes')\n    .update({ deleted_at: new Date().toISOString() })\n    .eq('id', id)\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Restore a soft-deleted note\n */\nexport async function restoreNote(id: number): Promise<Note> {\n  const { data, error } = await supabase\n    .from('notes')\n    .update({ deleted_at: null })\n    .eq('id', id)\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Permanently delete a note (hard delete)\n */\nexport async function deleteNote(id: number): Promise<void> {\n  const { error } = await supabase.from('notes').delete().eq('id', id);\n\n  if (error) throw error;\n}\n\n/**\n * Duplicate a note\n */\nexport async function duplicateNote(id: number): Promise<Note> {\n  // First, get the note to duplicate\n  const { data: originalNote, error: fetchError } = await supabase\n    .from('notes')\n    .select('*')\n    .eq('id', id)\n    .single();\n\n  if (fetchError) throw fetchError;\n\n  // Parse the original title\n  const { title, content } = parseNoteText(originalNote.text);\n  const newTitle = `${title} (Copy)`;\n  const newText = combineNoteText(newTitle, content);\n\n  // Create the duplicate\n  const { data, error } = await supabase\n    .from('notes')\n    .insert({\n      workspace_id: originalNote.workspace_id,\n      text: newText,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Empty trash (permanently delete all soft-deleted notes in a workspace)\n */\nexport async function emptyTrash(workspaceId: number): Promise<void> {\n  const { error } = await supabase\n    .from('notes')\n    .delete()\n    .eq('workspace_id', workspaceId)\n    .not('deleted_at', 'is', null);\n\n  if (error) throw error;\n}\n\n/**\n * Search notes by text content\n */\nexport async function searchNotes(\n  workspaceId: number,\n  searchQuery: string\n): Promise<Note[]> {\n  if (!searchQuery.trim()) {\n    return getNotes(workspaceId);\n  }\n\n  const { data, error } = await supabase\n    .from('notes')\n    .select(\n      `\n      *,\n      workspace:workspace_id(*),\n      workspace_member_note(\n        workspace_member_note_role,\n        workspace_member:workspace_member_id(\n          id,\n          user_id,\n          user_profiles!user_id(id, name, avatar_url)\n        )\n      )\n    `\n    )\n    .eq('workspace_id', workspaceId)\n    .ilike('text', `%${searchQuery}%`)\n    .order('updated_at', { ascending: false });\n\n  if (error) throw error;\n\n  // Transform the nested structure to match our types\n  return (data || []).map(note => ({\n    ...note,\n    workspace_member_note: (note.workspace_member_note || []).map(\n      (assignment: { workspace_member?: { user_profiles?: unknown } }) => ({\n        ...assignment,\n        workspace_member: assignment.workspace_member\n          ? {\n              ...assignment.workspace_member,\n              user_profiles: Array.isArray(\n                assignment.workspace_member.user_profiles\n              )\n                ? assignment.workspace_member.user_profiles[0]\n                : assignment.workspace_member.user_profiles,\n            }\n          : undefined,\n      })\n    ),\n  }));\n}\n\n/**\n * Get notes where current user is assigned as assigner or assignee\n */\nexport async function getUserAssignedNotes(): Promise<Note[]> {\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) throw new Error('Not authenticated');\n\n  // 1. Get all workspace_member records for current user\n  const { data: members, error: memberError } = await supabase\n    .from('workspace_member')\n    .select('id')\n    .eq('user_id', user.id);\n\n  if (memberError) throw memberError;\n  if (!members || members.length === 0) return [];\n\n  const memberIds = members.map(m => m.id);\n\n  // 2. Get note_ids from workspace_member_note\n  const { data: assignments, error: assignmentError } = await supabase\n    .from('workspace_member_note')\n    .select('note_id')\n    .in('workspace_member_id', memberIds);\n\n  if (assignmentError) throw assignmentError;\n  if (!assignments || assignments.length === 0) return [];\n\n  const noteIds = [...new Set(assignments.map(a => a.note_id))];\n\n  // 3. Get notes with workspace info and assignments\n  const { data, error } = await supabase\n    .from('notes')\n    .select(\n      `\n      *,\n      workspace:workspace_id(*),\n      workspace_member_note(\n        workspace_member_note_role,\n        workspace_member:workspace_member_id(\n          id,\n          user_id,\n          user_profiles!user_id(id, name, avatar_url)\n        )\n      )\n    `\n    )\n    .in('id', noteIds)\n    .order('updated_at', { ascending: false });\n\n  if (error) throw error;\n\n  // Transform the nested structure to match our types\n  return (data || []).map(note => ({\n    ...note,\n    workspace_member_note: (note.workspace_member_note || []).map(\n      (assignment: { workspace_member?: { user_profiles?: unknown } }) => ({\n        ...assignment,\n        workspace_member: assignment.workspace_member\n          ? {\n              ...assignment.workspace_member,\n              user_profiles: Array.isArray(\n                assignment.workspace_member.user_profiles\n              )\n                ? assignment.workspace_member.user_profiles[0]\n                : assignment.workspace_member.user_profiles,\n            }\n          : undefined,\n      })\n    ),\n  }));\n}\n\n/**\n * Assign note to workspace members as assigner/assignee\n */\nexport async function assignNoteToMembers(\n  noteId: number,\n  assignerIds: number[],\n  assigneeIds: number[]\n): Promise<void> {\n  // Delete existing assignments\n  const { error: deleteError } = await supabase\n    .from('workspace_member_note')\n    .delete()\n    .eq('note_id', noteId);\n\n  if (deleteError) throw deleteError;\n\n  // Create new assignments\n  const assignments = [\n    ...assignerIds.map(id => ({\n      workspace_member_id: id,\n      note_id: noteId,\n      workspace_member_note_role: 'assigner',\n    })),\n    ...assigneeIds.map(id => ({\n      workspace_member_id: id,\n      note_id: noteId,\n      workspace_member_note_role: 'assignee',\n    })),\n  ];\n\n  if (assignments.length > 0) {\n    const { error } = await supabase\n      .from('workspace_member_note')\n      .insert(assignments);\n    if (error) throw error;\n  }\n}\n\n/**\n * Get note assignment information\n */\ntype NoteAssignmentItem = {\n  workspace_member_note_role: string;\n  workspace_member?: {\n    id?: number;\n    user_id?: string;\n    user_profiles?:\n      | {\n          id?: string;\n          name?: string;\n        }\n      | {\n          id?: string;\n          name?: string;\n        }[];\n  };\n};\n\nexport async function getNoteAssignments(noteId: number): Promise<{\n  assigners: NoteAssignmentItem[];\n  assignees: NoteAssignmentItem[];\n}> {\n  const { data, error } = await supabase\n    .from('workspace_member_note')\n    .select(\n      `\n      workspace_member_note_role,\n      workspace_member:workspace_member_id(\n        id,\n        user_id,\n        user_profiles!user_id(id, name)\n      )\n    `\n    )\n    .eq('note_id', noteId);\n\n  if (error) {\n    throw error;\n  }\n\n  // Transform nested structure (same pattern as workspaceMessagesApi)\n  const transformedData = (data || []).map((item: unknown) => {\n    const typedItem = item as NoteAssignmentItem;\n    return {\n      workspace_member_note_role: typedItem.workspace_member_note_role,\n      workspace_member: typedItem.workspace_member\n        ? {\n            ...typedItem.workspace_member,\n            user_profile: Array.isArray(\n              typedItem.workspace_member.user_profiles\n            )\n              ? typedItem.workspace_member.user_profiles[0]\n              : typedItem.workspace_member.user_profiles,\n          }\n        : undefined,\n    };\n  });\n\n  const result = {\n    assigners:\n      transformedData.filter(\n        d => d.workspace_member_note_role === 'assigner'\n      ) || [],\n    assignees:\n      transformedData.filter(\n        d => d.workspace_member_note_role === 'assignee'\n      ) || [],\n  };\n\n  return result;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/hooks/useNotes.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport useSWR from 'swr';\nimport {\n  getNotes,\n  getNote,\n  createNote,\n  updateNote,\n  deleteNote,\n  softDeleteNote,\n  restoreNote,\n  duplicateNote,\n  emptyTrash,\n  searchNotes,\n  parseNoteText,\n  getUserAssignedNotes,\n} from '@/lib/api/notesApi';\nimport type { Note, NoteWithParsed } from '@/types/note';\nimport { getPersonalWorkspaceId } from '@/lib/cookies';\n\n/**\n * Parse note into format with title, content, and preview\n */\nfunction parseNote(note: Note): NoteWithParsed {\n  const { title, content } = parseNoteText(note.text);\n  const preview = content.slice(0, 100) + (content.length > 100 ? '...' : '');\n\n  return {\n    ...note,\n    title,\n    content,\n    preview,\n  };\n}\n\n/**\n * Format date for display\n */\nfunction formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  return date\n    .toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n    })\n    .replace(/\\//g, '/');\n}\n\nexport function useNotes() {\n  const [notes, setNotes] = useState<NoteWithParsed[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchNotes = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const workspaceId = getPersonalWorkspaceId();\n      if (!workspaceId) {\n        throw new Error('No personal workspace found');\n      }\n\n      // Get personal notes\n      const personalNotes = await getNotes(workspaceId);\n\n      // Get assigned group notes\n      const assignedNotes = await getUserAssignedNotes();\n\n      // Merge and deduplicate by note ID\n      const allNotesMap = new Map<number, Note>();\n      [...personalNotes, ...assignedNotes].forEach(note => {\n        allNotesMap.set(note.id, note);\n      });\n\n      const parsedNotes = Array.from(allNotesMap.values()).map(parseNote);\n      setNotes(parsedNotes);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch notes');\n      console.error('Error fetching notes:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const searchNotesQuery = useCallback(async (query: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const workspaceId = getPersonalWorkspaceId();\n      if (!workspaceId) {\n        throw new Error('No personal workspace found');\n      }\n\n      const data = await searchNotes(workspaceId, query);\n      const parsedNotes = data.map(parseNote);\n      setNotes(parsedNotes);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to search notes');\n      console.error('Error searching notes:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const createNewNote = useCallback(async (title: string, content: string) => {\n    try {\n      setError(null);\n\n      const workspaceId = getPersonalWorkspaceId();\n      if (!workspaceId) {\n        throw new Error('No personal workspace found');\n      }\n\n      const newNote = await createNote(workspaceId, title, content);\n      const parsedNote = parseNote(newNote);\n      setNotes(prev => [parsedNote, ...prev]);\n      return parsedNote;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create note');\n      console.error('Error creating note:', err);\n      throw err;\n    }\n  }, []);\n\n  const updateExistingNote = useCallback(\n    async (id: number, title: string, content: string) => {\n      try {\n        setError(null);\n\n        const updatedNote = await updateNote(id, title, content);\n        const parsedNote = parseNote(updatedNote);\n        setNotes(prev =>\n          prev.map(note => (note.id === id ? parsedNote : note))\n        );\n        return parsedNote;\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to update note');\n        console.error('Error updating note:', err);\n        throw err;\n      }\n    },\n    []\n  );\n\n  const deleteExistingNote = useCallback(async (id: number) => {\n    try {\n      setError(null);\n\n      await deleteNote(id);\n      setNotes(prev => prev.filter(note => note.id !== id));\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete note');\n      console.error('Error deleting note:', err);\n      throw err;\n    }\n  }, []);\n\n  const softDeleteExistingNote = useCallback(async (id: number) => {\n    try {\n      setError(null);\n\n      const deletedNote = await softDeleteNote(id);\n      const parsedNote = parseNote(deletedNote);\n      setNotes(prev => prev.map(note => (note.id === id ? parsedNote : note)));\n      return parsedNote;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete note');\n      console.error('Error soft deleting note:', err);\n      throw err;\n    }\n  }, []);\n\n  const restoreExistingNote = useCallback(async (id: number) => {\n    try {\n      setError(null);\n\n      const restoredNote = await restoreNote(id);\n      const parsedNote = parseNote(restoredNote);\n      setNotes(prev => prev.map(note => (note.id === id ? parsedNote : note)));\n      return parsedNote;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to restore note');\n      console.error('Error restoring note:', err);\n      throw err;\n    }\n  }, []);\n\n  const duplicateExistingNote = useCallback(async (id: number) => {\n    try {\n      setError(null);\n\n      const newNote = await duplicateNote(id);\n      const parsedNote = parseNote(newNote);\n      setNotes(prev => [parsedNote, ...prev]);\n      return parsedNote;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to duplicate note');\n      console.error('Error duplicating note:', err);\n      throw err;\n    }\n  }, []);\n\n  const emptyPersonalTrash = useCallback(async () => {\n    try {\n      setError(null);\n\n      const workspaceId = getPersonalWorkspaceId();\n      if (!workspaceId) {\n        throw new Error('No personal workspace found');\n      }\n\n      await emptyTrash(workspaceId);\n      setNotes(prev => prev.filter(note => !note.deleted_at));\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to empty trash');\n      console.error('Error emptying trash:', err);\n      throw err;\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchNotes();\n  }, [fetchNotes]);\n\n  return {\n    notes,\n    loading,\n    error,\n    refetch: fetchNotes,\n    searchNotes: searchNotesQuery,\n    createNote: createNewNote,\n    updateNote: updateExistingNote,\n    deleteNote: deleteExistingNote,\n    softDeleteNote: softDeleteExistingNote,\n    restoreNote: restoreExistingNote,\n    duplicateNote: duplicateExistingNote,\n    emptyTrash: emptyPersonalTrash,\n  };\n}\n\n/**\n * Hook for fetching an existing note by ID using SWR\n */\nexport function useNote(id: number) {\n  const { data, error, isLoading } = useSWR<Note | null>(\n    `/notes/${id}`,\n    () => getNote(id),\n    {\n      revalidateOnFocus: false,\n      revalidateOnReconnect: true,\n    }\n  );\n\n  return {\n    note: data ? parseNote(data) : null,\n    loading: isLoading,\n    error,\n  };\n}\n\n/**\n * Hook for creating a new note\n */\nexport function useNewNote() {\n  const [note, setNote] = useState<NoteWithParsed | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const workspaceId = getPersonalWorkspaceId();\n    if (!workspaceId) {\n      setLoading(false);\n      return;\n    }\n\n    setNote({\n      id: 0,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n      text: '',\n      workspace_id: workspaceId,\n      title: '',\n      content: '',\n      preview: '',\n    });\n    setLoading(false);\n  }, []);\n\n  return { note, loading, error: null };\n}\n\n/**\n * Hook for note mutations (create, update, delete)\n */\nexport function useNoteMutations() {\n  const create = useCallback(async (title: string, content: string) => {\n    const workspaceId = getPersonalWorkspaceId();\n    if (!workspaceId) throw new Error('No personal workspace found');\n\n    const newNote = await createNote(workspaceId, title, content);\n    return parseNote(newNote);\n  }, []);\n\n  const update = useCallback(\n    async (id: number, title: string, content: string) => {\n      const updatedNote = await updateNote(id, title, content);\n      return parseNote(updatedNote);\n    },\n    []\n  );\n\n  const remove = useCallback(async (id: number) => {\n    await deleteNote(id);\n  }, []);\n\n  return { create, update, remove };\n}\n\nexport { formatDate };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/SearchBar.tsx"],"sourcesContent":["import * as React from 'react';\nimport { MicIcon, SearchIcon } from 'lucide-react';\n\nimport GlassCard from '@/components/glass-card/GlassCard';\nimport { cn } from '@/lib/utils';\n\nexport interface SearchBarProps\n  extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'className'> {\n  className?: string;\n  containerClassName?: string;\n}\n\nconst SearchBar = React.forwardRef<HTMLInputElement, SearchBarProps>(\n  ({ containerClassName, type = 'text', className, ...inputProps }, ref) => (\n    <GlassCard\n      className={cn(\n        'flex flex-1 items-center rounded-4xl px-4 py-3',\n        containerClassName\n      )}\n    >\n      <SearchIcon className='mr-2 size-5 text-gray-400' />\n      <input\n        ref={ref}\n        type={type}\n        className={cn(\n          'w-full bg-transparent text-sm text-white outline-none placeholder-gray-500',\n          className\n        )}\n        {...inputProps}\n      />\n      <MicIcon className='ml-2 size-5 text-gray-400' />\n    </GlassCard>\n  )\n);\n\nSearchBar.displayName = 'SearchBar';\n\nexport default SearchBar;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;;;;;;AAQA,MAAM,0BAAY,+ZAAgB,MAChC,QAAkE;QAAjE,EAAE,kBAAkB,EAAE,OAAO,MAAM,EAAE,SAAS,EAAE,GAAG,YAAY;yBAC9D,ibAAC,mNAAS;QACR,WAAW,IAAA,iLAAE,EACX,kDACA;;0BAGF,ibAAC,gRAAU;gBAAC,WAAU;;;;;;0BACtB,ibAAC;gBACC,KAAK;gBACL,MAAM;gBACN,WAAW,IAAA,iLAAE,EACX,8EACA;gBAED,GAAG,UAAU;;;;;;0BAEhB,ibAAC,uQAAO;gBAAC,WAAU;;;;;;;;;;;;;;AAKzB,UAAU,WAAW,GAAG;uCAET","debugId":null}},
    {"offset": {"line": 981, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/glass-card/GlassButton.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport { Button, type ButtonProps } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\nexport type GlassButtonProps = ButtonProps;\n\nconst GlassButton = React.forwardRef<HTMLButtonElement, GlassButtonProps>(\n  ({ className, ...props }, ref) => (\n    <Button\n      ref={ref}\n      className={cn(\n        'bg-white/10 backdrop-blur-xl border border-black rounded-full p-2 transition-all duration-300 shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)] hover:bg-white/15 hover:shadow-[0_12px_40px_rgba(0,0,0,0.25),inset_0_1px_0_rgba(255,255,255,0.18)] disabled:hover:shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)]',\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nGlassButton.displayName = 'GlassButton';\n\nexport default GlassButton;\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AASA,MAAM,4BAAc,+ZAAgB,MAClC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,ibAAC,oMAAM;QACL,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,uWACA;QAED,GAAG,KAAK;;;;;;;;AAKf,YAAY,WAAW,GAAG;uCAEX","debugId":null}},
    {"offset": {"line": 1019, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/workspace/components/NoteContextMenu.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { Copy, Trash2, RotateCcw, Trash } from 'lucide-react';\n\ninterface NoteContextMenuProps {\n  x: number;\n  y: number;\n  onClose: () => void;\n  onSoftDelete?: () => void;\n  onHardDelete?: () => void;\n  onDuplicate?: () => void;\n  onRestore?: () => void;\n  isDeleted?: boolean;\n}\n\nexport default function NoteContextMenu({\n  x,\n  y,\n  onClose,\n  onSoftDelete,\n  onHardDelete,\n  onDuplicate,\n  onRestore,\n  isDeleted = false,\n}: NoteContextMenuProps) {\n  const menuRef = useRef<HTMLDivElement>(null);\n  const [position, setPosition] = useState({ x, y });\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscape);\n\n    // Adjust position if menu goes off-screen\n    if (menuRef.current) {\n      const rect = menuRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n\n      let adjustedX = x;\n      let adjustedY = y;\n\n      if (rect.right > viewportWidth) {\n        adjustedX = viewportWidth - rect.width - 10;\n      }\n\n      if (rect.bottom > viewportHeight) {\n        adjustedY = viewportHeight - rect.height - 10;\n      }\n\n      if (adjustedX !== x || adjustedY !== y) {\n        setPosition({ x: adjustedX, y: adjustedY });\n      }\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [x, y, onClose]);\n\n  const handleAction = (action: () => void) => {\n    action();\n    onClose();\n  };\n\n  return (\n    <div\n      ref={menuRef}\n      className='fixed z-50 bg-white/8 backdrop-blur-xl border border-black rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.4),inset_0_1px_0_rgba(255,255,255,0.12)] py-2 px-2 min-w-[180px] overflow-hidden'\n      style={{\n        left: `${position.x}px`,\n        top: `${position.y}px`,\n      }}\n    >\n      {isDeleted ? (\n        <>\n          {/* Restore option for deleted notes */}\n          {onRestore && (\n            <button\n              onClick={() => handleAction(onRestore)}\n              className='w-full px-3 py-2.5 text-left text-sm text-white hover:bg-white/10 flex items-center gap-3 transition-all duration-200 rounded-lg mb-1'\n            >\n              <RotateCcw className='w-4 h-4 text-blue-400' />\n              <span className='font-medium'>Restore</span>\n            </button>\n          )}\n          {/* Hard delete option for deleted notes */}\n          {onHardDelete && (\n            <button\n              onClick={() => handleAction(onHardDelete)}\n              className='w-full px-3 py-2.5 text-left text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-3 transition-all duration-200 rounded-lg'\n            >\n              <Trash className='w-4 h-4' />\n              <span className='font-medium'>Delete Permanently</span>\n            </button>\n          )}\n        </>\n      ) : (\n        <>\n          {/* Duplicate option for active notes */}\n          {onDuplicate && (\n            <button\n              onClick={() => handleAction(onDuplicate)}\n              className='w-full px-3 py-2.5 text-left text-sm text-white hover:bg-white/10 flex items-center gap-3 transition-all duration-200 rounded-lg mb-1'\n            >\n              <Copy className='w-4 h-4 text-blue-400' />\n              <span className='font-medium'>Duplicate</span>\n            </button>\n          )}\n          {/* Soft delete option for active notes */}\n          {onSoftDelete && (\n            <>\n              <div className='h-px bg-white/10 my-2' />\n              <button\n                onClick={() => handleAction(onSoftDelete)}\n                className='w-full px-3 py-2.5 text-left text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-3 transition-all duration-200 rounded-lg'\n              >\n                <Trash2 className='w-4 h-4' />\n                <span className='font-medium'>Move to Trash</span>\n              </button>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;AAHA;;;AAgBe,SAAS,gBAAgB,KASjB;QATiB,EACtC,CAAC,EACD,CAAC,EACD,OAAO,EACP,YAAY,EACZ,YAAY,EACZ,WAAW,EACX,SAAS,EACT,YAAY,KAAK,EACI,GATiB;;IAUtC,MAAM,UAAU,IAAA,2ZAAM,EAAiB;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6ZAAQ,EAAC;QAAE;QAAG;IAAE;IAEhD,IAAA,8ZAAS;qCAAC;YACR,MAAM;gEAAqB,CAAC;oBAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;wBACtE;oBACF;gBACF;;YAEA,MAAM;0DAAe,CAAC;oBACpB,IAAI,MAAM,GAAG,KAAK,UAAU;wBAC1B;oBACF;gBACF;;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,gBAAgB,CAAC,WAAW;YAErC,0CAA0C;YAC1C,IAAI,QAAQ,OAAO,EAAE;gBACnB,MAAM,OAAO,QAAQ,OAAO,CAAC,qBAAqB;gBAClD,MAAM,gBAAgB,OAAO,UAAU;gBACvC,MAAM,iBAAiB,OAAO,WAAW;gBAEzC,IAAI,YAAY;gBAChB,IAAI,YAAY;gBAEhB,IAAI,KAAK,KAAK,GAAG,eAAe;oBAC9B,YAAY,gBAAgB,KAAK,KAAK,GAAG;gBAC3C;gBAEA,IAAI,KAAK,MAAM,GAAG,gBAAgB;oBAChC,YAAY,iBAAiB,KAAK,MAAM,GAAG;gBAC7C;gBAEA,IAAI,cAAc,KAAK,cAAc,GAAG;oBACtC,YAAY;wBAAE,GAAG;wBAAW,GAAG;oBAAU;gBAC3C;YACF;YAEA;6CAAO;oBACL,SAAS,mBAAmB,CAAC,aAAa;oBAC1C,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;QACF;oCAAG;QAAC;QAAG;QAAG;KAAQ;IAElB,MAAM,eAAe,CAAC;QACpB;QACA;IACF;IAEA,qBACE,ibAAC;QACC,KAAK;QACL,WAAU;QACV,OAAO;YACL,MAAM,AAAC,GAAa,OAAX,SAAS,CAAC,EAAC;YACpB,KAAK,AAAC,GAAa,OAAX,SAAS,CAAC,EAAC;QACrB;kBAEC,0BACC;;gBAEG,2BACC,ibAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAU;;sCAEV,ibAAC,qRAAS;4BAAC,WAAU;;;;;;sCACrB,ibAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;gBAIjC,8BACC,ibAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAU;;sCAEV,ibAAC,qQAAK;4BAAC,WAAU;;;;;;sCACjB,ibAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;;yCAKpC;;gBAEG,6BACC,ibAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAU;;sCAEV,ibAAC,kQAAI;4BAAC,WAAU;;;;;;sCAChB,ibAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;gBAIjC,8BACC;;sCACE,ibAAC;4BAAI,WAAU;;;;;;sCACf,ibAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAU;;8CAEV,ibAAC,4QAAM;oCAAC,WAAU;;;;;;8CAClB,ibAAC;oCAAK,WAAU;8CAAc;;;;;;;;;;;;;;;;;;;;;AAQ9C;GA3HwB;KAAA","debugId":null}},
    {"offset": {"line": 1238, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/app/%28private%29/notes/page.tsx"],"sourcesContent":["'use client';\n\nimport NoteList from '@/features/notes/components/NoteList';\nimport { useNotes, formatDate, useNoteMutations } from '@/hooks/useNotes';\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport { getPersonalWorkspaceId } from '@/lib/cookies';\nimport { PenSquare, Trash2 } from 'lucide-react';\nimport SearchBar from '@/components/SearchBar';\nimport GlassButton from '@/components/glass-card/GlassButton';\nimport GlassCard from '@/components/glass-card/GlassCard';\nimport NoteContextMenu from '@/features/workspace/components/NoteContextMenu';\n\nexport default function NotesPage() {\n  const router = useRouter();\n  const {\n    notes,\n    loading,\n    error,\n    searchNotes,\n    softDeleteNote,\n    deleteNote,\n    restoreNote,\n    duplicateNote,\n    emptyTrash,\n  } = useNotes();\n  const { create } = useNoteMutations();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isCreating, setIsCreating] = useState(false);\n  const [contextMenu, setContextMenu] = useState<{\n    x: number;\n    y: number;\n    noteId: string;\n    isDeleted: boolean;\n  } | null>(null);\n  const [showHardDeleteConfirm, setShowHardDeleteConfirm] = useState<\n    string | null\n  >(null);\n  const [showEmptyTrashConfirm, setShowEmptyTrashConfirm] = useState(false);\n\n  const personalWorkspaceId = getPersonalWorkspaceId();\n\n  // Separate active and deleted notes\n  const activeNotes = notes.filter(note => !note.deleted_at);\n  const deletedNotes = notes.filter(note => note.deleted_at);\n\n  const formattedActiveNotes = activeNotes.map(note => ({\n    id: note.id.toString(),\n    title: note.title,\n    date: formatDate(note.updated_at),\n    preview: note.preview,\n    workspace: note.workspace,\n    isGroupNote:\n      note.workspace?.type === 'group' &&\n      note.workspace_id !== personalWorkspaceId,\n    updated_at: note.updated_at,\n    deleted_at: note.deleted_at,\n  }));\n\n  const formattedDeletedNotes = deletedNotes.map(note => ({\n    id: note.id.toString(),\n    title: note.title,\n    date: formatDate(note.updated_at),\n    preview: note.preview,\n    workspace: note.workspace,\n    isGroupNote:\n      note.workspace?.type === 'group' &&\n      note.workspace_id !== personalWorkspaceId,\n    updated_at: note.updated_at,\n    deleted_at: note.deleted_at,\n  }));\n\n  const handleCreateNote = async () => {\n    try {\n      setIsCreating(true);\n      const workspaceId = getPersonalWorkspaceId();\n      if (!workspaceId) {\n        throw new Error('No personal workspace found');\n      }\n\n      // Create a new note with empty/default content\n      const newNote = await create('Untitled', '');\n\n      // Navigate to the new note page\n      router.push(`/notes/${newNote.id}`);\n    } catch (err) {\n      console.error('Failed to create note:', err);\n      // TODO: Show error toast/notification\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  const handleNoteClick = (id: string) => {\n    router.push(`/notes/${id}`);\n  };\n\n  const handleContextMenu = (\n    e: React.MouseEvent,\n    noteId: string,\n    isDeleted: boolean\n  ) => {\n    e.preventDefault();\n    setContextMenu({\n      x: e.clientX,\n      y: e.clientY,\n      noteId,\n      isDeleted,\n    });\n  };\n\n  const handleSoftDelete = async (noteId: string) => {\n    try {\n      await softDeleteNote(parseInt(noteId));\n    } catch (err) {\n      console.error('Failed to soft delete note:', err);\n    }\n  };\n\n  const handleHardDelete = async (noteId: string) => {\n    try {\n      await deleteNote(parseInt(noteId));\n      setShowHardDeleteConfirm(null);\n    } catch (err) {\n      console.error('Failed to permanently delete note:', err);\n    }\n  };\n\n  const handleRestore = async (noteId: string) => {\n    try {\n      await restoreNote(parseInt(noteId));\n    } catch (err) {\n      console.error('Failed to restore note:', err);\n    }\n  };\n\n  const handleDuplicate = async (noteId: string) => {\n    try {\n      await duplicateNote(parseInt(noteId));\n    } catch (err) {\n      console.error('Failed to duplicate note:', err);\n    }\n  };\n\n  const handleEmptyTrash = async () => {\n    try {\n      await emptyTrash();\n      setShowEmptyTrashConfirm(false);\n    } catch (err) {\n      console.error('Failed to empty trash:', err);\n    }\n  };\n\n  return (\n    <div className='flex flex-col h-full text-gray-100 relative overflow-hidden'>\n      {/* 固定ヘッダー（タイトル + 検索バー + 新規作成ボタン） */}\n      <div className='relative z-20 px-4 md:px-6 pt-4 md:pt-6 pb-4'>\n        {/* 検索バー + 新規作成ボタン */}\n        <div className='flex w-full items-center justify-between gap-3'>\n          <SearchBar\n            placeholder='Search notes...'\n            value={searchQuery}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n              setSearchQuery(e.target.value);\n              searchNotes(e.target.value);\n            }}\n          />\n\n          {/* 新規作成ボタン */}\n          <GlassButton\n            onClick={handleCreateNote}\n            disabled={isCreating}\n            size='icon'\n            className='size-11 disabled:cursor-not-allowed'\n          >\n            {isCreating ? (\n              <div className='animate-spin rounded-full h-5 w-5 border-b-2 border-gray-300'></div>\n            ) : (\n              <PenSquare className='w-5 h-5 text-white' />\n            )}\n          </GlassButton>\n        </div>\n      </div>\n\n      {/* スクロール可能エリア（ノートリストのみ） */}\n      <div\n        className='relative z-10 flex-1 overflow-y-auto px-4 md:px-6 pb-4'\n        style={{\n          willChange: 'scroll-position',\n          transform: 'translateZ(0)',\n          WebkitOverflowScrolling: 'touch',\n        }}\n      >\n        {loading && (\n          <div className='flex justify-center items-center py-12'>\n            <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-white'></div>\n          </div>\n        )}\n\n        {error && (\n          <div className='bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-300'>\n            {error}\n          </div>\n        )}\n\n        {!loading && !error && (\n          <>\n            <NoteList\n              notes={formattedActiveNotes}\n              onNoteClick={handleNoteClick}\n              onContextMenu={handleContextMenu}\n            />\n\n            {/* Trash Section */}\n            {deletedNotes.length > 0 && (\n              <div className='mt-6'>\n                <div className='flex items-center justify-between mb-3 px-1'>\n                  <h3 className='text-sm font-medium text-gray-400 flex items-center gap-2'>\n                    <Trash2 className='w-4 h-4' />\n                    Trash ({deletedNotes.length})\n                  </h3>\n                  <button\n                    onClick={() => setShowEmptyTrashConfirm(true)}\n                    className='text-xs text-red-400 hover:text-red-300 px-3 py-1.5 rounded-lg hover:bg-red-500/10 transition-all duration-200 font-medium'\n                  >\n                    Empty Trash\n                  </button>\n                </div>\n                <div className='flex flex-col gap-[14px]'>\n                  <NoteList\n                    notes={formattedDeletedNotes}\n                    onNoteClick={handleNoteClick}\n                    onContextMenu={handleContextMenu}\n                  />\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Context Menu */}\n      {contextMenu && (\n        <NoteContextMenu\n          x={contextMenu.x}\n          y={contextMenu.y}\n          onClose={() => setContextMenu(null)}\n          isDeleted={contextMenu.isDeleted}\n          onSoftDelete={\n            !contextMenu.isDeleted\n              ? () => handleSoftDelete(contextMenu.noteId)\n              : undefined\n          }\n          onHardDelete={\n            contextMenu.isDeleted\n              ? () => setShowHardDeleteConfirm(contextMenu.noteId)\n              : undefined\n          }\n          onDuplicate={\n            !contextMenu.isDeleted\n              ? () => handleDuplicate(contextMenu.noteId)\n              : undefined\n          }\n          onRestore={\n            contextMenu.isDeleted\n              ? () => handleRestore(contextMenu.noteId)\n              : undefined\n          }\n        />\n      )}\n\n      {/* Hard Delete Confirmation Modal */}\n      {showHardDeleteConfirm && (\n        <div className='fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4'>\n          <GlassCard className='p-6 max-w-sm w-full rounded-2xl'>\n            <h3 className='text-lg font-semibold text-white mb-2'>\n              Delete Permanently\n            </h3>\n            <p className='text-gray-400 mb-6 text-sm leading-relaxed'>\n              Are you sure you want to permanently delete this note? This action\n              cannot be undone.\n            </p>\n            <div className='flex gap-3'>\n              <button\n                onClick={() => setShowHardDeleteConfirm(null)}\n                className='flex-1 px-4 py-2.5 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all duration-200 font-medium'\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => handleHardDelete(showHardDeleteConfirm)}\n                className='flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg shadow-red-500/20'\n              >\n                Delete\n              </button>\n            </div>\n          </GlassCard>\n        </div>\n      )}\n\n      {/* Empty Trash Confirmation Modal */}\n      {showEmptyTrashConfirm && (\n        <div className='fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4'>\n          <GlassCard className='p-6 max-w-sm w-full rounded-2xl'>\n            <h3 className='text-lg font-semibold text-white mb-2'>\n              Empty Trash\n            </h3>\n            <p className='text-gray-400 mb-6 text-sm leading-relaxed'>\n              Are you sure you want to permanently delete all{' '}\n              {deletedNotes.length} note\n              {deletedNotes.length !== 1 ? 's' : ''} in the trash? This action\n              cannot be undone.\n            </p>\n            <div className='flex gap-3'>\n              <button\n                onClick={() => setShowEmptyTrashConfirm(false)}\n                className='flex-1 px-4 py-2.5 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all duration-200 font-medium'\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleEmptyTrash}\n                className='flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg shadow-red-500/20'\n              >\n                Empty Trash\n              </button>\n            </div>\n          </GlassCard>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}