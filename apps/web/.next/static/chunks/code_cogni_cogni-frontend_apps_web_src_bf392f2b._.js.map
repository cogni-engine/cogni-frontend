{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/hooks/useWorkspace.ts"],"sourcesContent":["'use client';\n\nimport useSWR, { mutate } from 'swr';\nimport {\n  getWorkspaces,\n  getWorkspace,\n  createWorkspace,\n  updateWorkspace,\n  deleteWorkspace,\n  getWorkspaceMembers,\n} from '@/lib/api/workspaceApi';\nimport type { Workspace, WorkspaceMember } from '@/types/workspace';\n\n// SWR keys\nconst WORKSPACES_KEY = '/workspaces';\nconst workspaceKey = (id: number) => `/workspaces/${id}`;\n\n// Hooks\nexport function useWorkspaces() {\n  const { data, error, isLoading } = useSWR<Workspace[]>(\n    WORKSPACES_KEY,\n    getWorkspaces,\n    {\n      revalidateOnFocus: false,\n      revalidateOnReconnect: true,\n    }\n  );\n\n  return {\n    workspaces: data,\n    isLoading,\n    error,\n  };\n}\n\nexport function useWorkspace(id: number | null) {\n  const { data, error, isLoading } = useSWR<Workspace>(\n    id ? workspaceKey(id) : null,\n    () => getWorkspace(id!),\n    {\n      revalidateOnFocus: false,\n      revalidateOnReconnect: true,\n    }\n  );\n\n  return {\n    workspace: data,\n    isLoading,\n    error,\n  };\n}\n\nexport function useWorkspaceMembers(workspaceId: number | null) {\n  const { data, error, isLoading } = useSWR<WorkspaceMember[]>(\n    workspaceId ? `/workspaces/${workspaceId}/members` : null,\n    workspaceId ? async () => await getWorkspaceMembers(workspaceId) : null,\n    {\n      revalidateOnFocus: false,\n      revalidateOnReconnect: true,\n    }\n  );\n\n  return {\n    members: data || [],\n    isLoading,\n    error,\n  };\n}\n\n// Mutation helpers\nexport function useWorkspaceMutations() {\n  const create = async (title: string) => {\n    const workspace = await createWorkspace(title);\n    mutate(WORKSPACES_KEY); // Revalidate list\n    return workspace;\n  };\n\n  const update = async (\n    id: number,\n    updates: Partial<Pick<Workspace, 'title' | 'type' | 'icon_url'>>\n  ) => {\n    const workspace = await updateWorkspace(id, updates);\n    mutate(workspaceKey(id)); // Revalidate specific workspace\n    mutate(WORKSPACES_KEY); // Revalidate list\n    return workspace;\n  };\n\n  const remove = async (id: number) => {\n    await deleteWorkspace(id);\n    mutate(WORKSPACES_KEY); // Revalidate list\n  };\n\n  return { create, update, remove };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAAA;AACA;;AAHA;;;AAaA,WAAW;AACX,MAAM,iBAAiB;AACvB,MAAM,eAAe,CAAC,KAAe,AAAC,eAAiB,OAAH;AAG7C,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,IAAA,wRAAM,EACvC,gBACA,0MAAa,EACb;QACE,mBAAmB;QACnB,uBAAuB;IACzB;IAGF,OAAO;QACL,YAAY;QACZ;QACA;IACF;AACF;GAfgB;;QACqB,wRAAM;;;AAgBpC,SAAS,aAAa,EAAiB;;IAC5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,IAAA,wRAAM,EACvC,KAAK,aAAa,MAAM;+BACxB,IAAM,IAAA,yMAAY,EAAC;8BACnB;QACE,mBAAmB;QACnB,uBAAuB;IACzB;IAGF,OAAO;QACL,WAAW;QACX;QACA;IACF;AACF;IAfgB;;QACqB,wRAAM;;;AAgBpC,SAAS,oBAAoB,WAA0B;;IAC5D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,IAAA,wRAAM,EACvC,cAAc,AAAC,eAA0B,OAAZ,aAAY,cAAY,MACrD;sCAAc,UAAY,MAAM,IAAA,gNAAmB,EAAC;uCAAe,MACnE;QACE,mBAAmB;QACnB,uBAAuB;IACzB;IAGF,OAAO;QACL,SAAS,QAAQ,EAAE;QACnB;QACA;IACF;AACF;IAfgB;;QACqB,wRAAM;;;AAiBpC,SAAS;IACd,MAAM,SAAS,OAAO;QACpB,MAAM,YAAY,MAAM,IAAA,4MAAe,EAAC;QACxC,IAAA,4UAAM,EAAC,iBAAiB,kBAAkB;QAC1C,OAAO;IACT;IAEA,MAAM,SAAS,OACb,IACA;QAEA,MAAM,YAAY,MAAM,IAAA,4MAAe,EAAC,IAAI;QAC5C,IAAA,4UAAM,EAAC,aAAa,MAAM,gCAAgC;QAC1D,IAAA,4UAAM,EAAC,iBAAiB,kBAAkB;QAC1C,OAAO;IACT;IAEA,MAAM,SAAS,OAAO;QACpB,MAAM,IAAA,4MAAe,EAAC;QACtB,IAAA,4UAAM,EAAC,iBAAiB,kBAAkB;IAC5C;IAEA,OAAO;QAAE;QAAQ;QAAQ;IAAO;AAClC","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/glass-card/GlassCard.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport type GlassCardProps = React.HTMLAttributes<HTMLDivElement>;\n\nconst GlassCard = React.forwardRef<HTMLDivElement, GlassCardProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'bg-white/8 backdrop-blur-xl transition-all duration-300 border border-black shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)] hover:shadow-[0_12px_40px_rgba(0,0,0,0.25),inset_0_1px_0_rgba(255,255,255,0.18)]',\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nGlassCard.displayName = 'GlassCard';\n\nexport default GlassCard;\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,0BAAY,+ZAAgB,MAChC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,ibAAC;QACC,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,0OACA;QAED,GAAG,KAAK;;;;;;;;AAKf,UAAU,WAAW,GAAG;uCAET","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/workspace/components/WorkspaceList.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport type { Workspace } from '@/types/workspace';\nimport { Building2 } from 'lucide-react';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport GlassCard from '@/components/glass-card/GlassCard';\n\ninterface WorkspaceListProps {\n  workspaces: Workspace[];\n}\n\nexport default function WorkspaceList({ workspaces }: WorkspaceListProps) {\n  if (workspaces.length === 0) {\n    return (\n      <div className='text-center py-12'>\n        <div className='text-gray-500 text-lg mb-2'>No workspaces yet</div>\n        <div className='text-gray-600 text-sm'>\n          Create your first workspace to get started\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='flex flex-col gap-[14px]'>\n      {workspaces.map(workspace => (\n        <WorkspaceCard key={workspace.id} workspace={workspace} />\n      ))}\n    </div>\n  );\n}\n\ninterface WorkspaceCardProps {\n  workspace: Workspace;\n}\n\nfunction WorkspaceCard({ workspace }: WorkspaceCardProps) {\n  const router = useRouter();\n  const unreadCount = workspace.unread_count ?? 0;\n  const hasUnread = unreadCount > 0;\n  const displayCount = unreadCount > 99 ? '99+' : unreadCount;\n\n  const handleCardClick = () => {\n    router.push(`/workspace/${workspace.id}/chat`);\n  };\n\n  return (\n    <GlassCard\n      onClick={handleCardClick}\n      className='cursor-pointer rounded-[20px] px-5 py-[8px] '\n    >\n      <div className='flex items-center justify-between gap-3 py-2'>\n        <div className='flex items-center gap-3 flex-1 min-w-0'>\n          <Avatar className='h-10 w-10 border border-white/10 bg-white/5 uppercase text-sm tracking-wide'>\n            {workspace.icon_url ? (\n              <AvatarImage\n                src={workspace.icon_url}\n                alt={workspace.title ?? 'Workspace icon'}\n              />\n            ) : (\n              <AvatarFallback className='bg-white/5 text-white/70'>\n                <Building2 className='w-4 h-4' />\n              </AvatarFallback>\n            )}\n          </Avatar>\n          <div className='flex-1 min-w-0'>\n            <h3 className='font-semibold text-white text-[17px] leading-[1.4] mb-1 truncate'>\n              {workspace.title || 'Untitled Workspace'}\n            </h3>\n            <div className='flex items-center gap-2'>\n              <span\n                className={`px-2 py-0.5 rounded-full text-[10px] font-medium ${\n                  workspace.type === 'personal'\n                    ? 'bg-blue-500/20 text-blue-300'\n                    : 'bg-purple-600/20 text-purple-300'\n                }`}\n              >\n                {workspace.type}\n              </span>\n              <span className='text-[11px] text-gray-400'>\n                {new Date(workspace.created_at).toLocaleDateString()}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className='flex items-center gap-3 shrink-0'>\n          <span\n            className={`inline-flex min-w-[2.25rem] items-center justify-center rounded-full px-3 py-1 text-xs font-semibold transition-colors ${\n              hasUnread\n                ? 'bg-purple-500/20 text-purple-100 shadow-[0_0_15px_rgba(192,132,252,0.35)]'\n                : 'bg-white/10 text-white/40'\n            }`}\n          >\n            {displayCount}\n          </span>\n        </div>\n      </div>\n    </GlassCard>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;;;AANA;;;;;AAYe,SAAS,cAAc,KAAkC;QAAlC,EAAE,UAAU,EAAsB,GAAlC;IACpC,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,qBACE,ibAAC;YAAI,WAAU;;8BACb,ibAAC;oBAAI,WAAU;8BAA6B;;;;;;8BAC5C,ibAAC;oBAAI,WAAU;8BAAwB;;;;;;;;;;;;IAK7C;IAEA,qBACE,ibAAC;QAAI,WAAU;kBACZ,WAAW,GAAG,CAAC,CAAA,0BACd,ibAAC;gBAAiC,WAAW;eAAzB,UAAU,EAAE;;;;;;;;;;AAIxC;KAnBwB;AAyBxB,SAAS,cAAc,KAAiC;QAAjC,EAAE,SAAS,EAAsB,GAAjC;;IACrB,MAAM,SAAS,IAAA,sYAAS;QACJ;IAApB,MAAM,cAAc,CAAA,0BAAA,UAAU,YAAY,cAAtB,qCAAA,0BAA0B;IAC9C,MAAM,YAAY,cAAc;IAChC,MAAM,eAAe,cAAc,KAAK,QAAQ;IAEhD,MAAM,kBAAkB;QACtB,OAAO,IAAI,CAAC,AAAC,cAA0B,OAAb,UAAU,EAAE,EAAC;IACzC;QAamB;IAXnB,qBACE,ibAAC,mNAAS;QACR,SAAS;QACT,WAAU;kBAEV,cAAA,ibAAC;YAAI,WAAU;;8BACb,ibAAC;oBAAI,WAAU;;sCACb,ibAAC,oMAAM;4BAAC,WAAU;sCACf,UAAU,QAAQ,iBACjB,ibAAC,yMAAW;gCACV,KAAK,UAAU,QAAQ;gCACvB,KAAK,CAAA,mBAAA,UAAU,KAAK,cAAf,8BAAA,mBAAmB;;;;;qDAG1B,ibAAC,4MAAc;gCAAC,WAAU;0CACxB,cAAA,ibAAC,qRAAS;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAI3B,ibAAC;4BAAI,WAAU;;8CACb,ibAAC;oCAAG,WAAU;8CACX,UAAU,KAAK,IAAI;;;;;;8CAEtB,ibAAC;oCAAI,WAAU;;sDACb,ibAAC;4CACC,WAAW,AAAC,oDAIX,OAHC,UAAU,IAAI,KAAK,aACf,iCACA;sDAGL,UAAU,IAAI;;;;;;sDAEjB,ibAAC;4CAAK,WAAU;sDACb,IAAI,KAAK,UAAU,UAAU,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;8BAM1D,ibAAC;oBAAI,WAAU;8BACb,cAAA,ibAAC;wBACC,WAAW,AAAC,0HAIX,OAHC,YACI,8EACA;kCAGL;;;;;;;;;;;;;;;;;;;;;;AAMb;GAhES;;QACQ,sYAAS;;;MADjB","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/glass-card/GlassButton.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport { Button, type ButtonProps } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\nexport type GlassButtonProps = ButtonProps;\n\nconst GlassButton = React.forwardRef<HTMLButtonElement, GlassButtonProps>(\n  ({ className, ...props }, ref) => (\n    <Button\n      ref={ref}\n      className={cn(\n        'bg-white/10 backdrop-blur-xl border border-black rounded-full p-2 transition-all duration-300 shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)] hover:bg-white/15 hover:shadow-[0_12px_40px_rgba(0,0,0,0.25),inset_0_1px_0_rgba(255,255,255,0.18)] disabled:hover:shadow-[0_8px_32px_rgba(0,0,0,0.15),inset_0_1px_0_rgba(255,255,255,0.12)]',\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nGlassButton.displayName = 'GlassButton';\n\nexport default GlassButton;\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AASA,MAAM,4BAAc,+ZAAgB,MAClC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACtB,ibAAC,oMAAM;QACL,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,uWACA;QAED,GAAG,KAAK;;;;;;;;AAKf,YAAY,WAAW,GAAG;uCAEX","debugId":null}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/ui/dialog.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\n\nimport { cn } from '@/lib/utils';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-white/10 bg-neutral-900 p-6 text-white shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col space-y-1.5 text-center sm:text-left',\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = 'DialogHeader';\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-white/70', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n  DialogClose,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,SAAS,6aAAoB;AAEnC,MAAM,gBAAgB,gbAAuB;AAE7C,MAAM,eAAe,+aAAsB;AAE3C,MAAM,cAAc,8aAAqB;AAEzC,MAAM,8BAAgB,+ZAAgB,CAGpC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,ibAAC,gbAAuB;QACtB,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,2KACA;QAED,GAAG,KAAK;;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gbAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,+ZAAgB,OAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,ibAAC;;0BACC,ibAAC;;;;;0BACD,ibAAC,gbAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,iLAAE,EACX,iWACA;gBAED,GAAG,KAAK;0BAER;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gbAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,ibAAC;QACC,WAAW,IAAA,iLAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,ibAAC;QACC,WAAW,IAAA,iLAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,+ZAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,ibAAC,8aAAqB;QACpB,KAAK;QACL,WAAW,IAAA,iLAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,8aAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,+ZAAgB,OAGxC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,ibAAC,obAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,iLAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;;AAGb,kBAAkB,WAAW,GAAG,obAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/ui/input.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>;\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white ring-offset-black placeholder:text-white/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = 'Input';\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAQA,MAAM,sBAAQ,+ZAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,ibAAC;QACC,MAAM;QACN,WAAW,IAAA,iLAAE,EACX,kSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/ui/label.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Label = React.forwardRef<\n  HTMLLabelElement,\n  React.LabelHTMLAttributes<HTMLLabelElement>\n>(({ className, ...props }, ref) => (\n  <label\n    ref={ref}\n    className={cn('text-sm font-medium leading-none text-white', className)}\n    {...props}\n  />\n));\nLabel.displayName = 'Label';\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMA,MAAM,sBAAQ,+ZAAgB,MAG5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,ibAAC;QACC,KAAK;QACL,WAAW,IAAA,iLAAE,EAAC,+CAA+C;QAC5D,GAAG,KAAK;;;;;;;;AAGb,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/workspace/components/WorkspaceIconCropDialog.tsx"],"sourcesContent":["'use client';\n\nimport Cropper, { type Area } from 'react-easy-crop';\n\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter as DialogModalFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\n\ntype WorkspaceIconCropDialogProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  imageSrc: string | null;\n  crop: { x: number; y: number };\n  zoom: number;\n  onCropChange: (crop: { x: number; y: number }) => void;\n  onZoomChange: (zoom: number) => void;\n  onCropComplete: (area: Area, areaPixels: Area) => void;\n  onSave: () => void;\n  onCancel: () => void;\n  saving: boolean;\n  canSave: boolean;\n};\n\nexport function WorkspaceIconCropDialog({\n  open,\n  onOpenChange,\n  imageSrc,\n  crop,\n  zoom,\n  onCropChange,\n  onZoomChange,\n  onCropComplete,\n  onSave,\n  onCancel,\n  saving,\n  canSave,\n}: WorkspaceIconCropDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className='max-w-2xl'>\n        <DialogHeader>\n          <DialogTitle>Adjust workspace icon</DialogTitle>\n          <DialogDescription>\n            Center the important part of the image. The final icon will be a\n            square.\n          </DialogDescription>\n        </DialogHeader>\n        <div className='relative h-80 w-full overflow-hidden rounded-lg bg-black/40'>\n          {imageSrc ? (\n            <Cropper\n              image={imageSrc}\n              crop={crop}\n              zoom={zoom}\n              aspect={1}\n              showGrid={false}\n              onCropChange={onCropChange}\n              onZoomChange={onZoomChange}\n              onCropComplete={onCropComplete}\n            />\n          ) : (\n            <div className='flex h-full items-center justify-center text-white/60'>\n              No image selected.\n            </div>\n          )}\n        </div>\n        <div className='space-y-2'>\n          <Label htmlFor='workspace-icon-zoom'>Zoom</Label>\n          <input\n            id='workspace-icon-zoom'\n            type='range'\n            min={1}\n            max={3}\n            step={0.1}\n            value={zoom}\n            onChange={event => onZoomChange(Number(event.target.value))}\n            className='w-full accent-white'\n          />\n        </div>\n        <DialogModalFooter>\n          <DialogClose asChild>\n            <Button\n              type='button'\n              variant='ghost'\n              disabled={saving}\n              onClick={onCancel}\n            >\n              Cancel\n            </Button>\n          </DialogClose>\n          <Button type='button' onClick={onSave} disabled={saving || !canSave}>\n            {saving ? 'Saving…' : 'Save icon'}\n          </Button>\n        </DialogModalFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AASA;AAdA;;;;;;AA+BO,SAAS,wBAAwB,KAaT;QAbS,EACtC,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,IAAI,EACJ,IAAI,EACJ,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,MAAM,EACN,QAAQ,EACR,MAAM,EACN,OAAO,EACsB,GAbS;IActC,qBACE,ibAAC,oMAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,ibAAC,2MAAa;YAAC,WAAU;;8BACvB,ibAAC,0MAAY;;sCACX,ibAAC,yMAAW;sCAAC;;;;;;sCACb,ibAAC,+MAAiB;sCAAC;;;;;;;;;;;;8BAKrB,ibAAC;oBAAI,WAAU;8BACZ,yBACC,ibAAC,2VAAO;wBACN,OAAO;wBACP,MAAM;wBACN,MAAM;wBACN,QAAQ;wBACR,UAAU;wBACV,cAAc;wBACd,cAAc;wBACd,gBAAgB;;;;;6CAGlB,ibAAC;wBAAI,WAAU;kCAAwD;;;;;;;;;;;8BAK3E,ibAAC;oBAAI,WAAU;;sCACb,ibAAC,kMAAK;4BAAC,SAAQ;sCAAsB;;;;;;sCACrC,ibAAC;4BACC,IAAG;4BACH,MAAK;4BACL,KAAK;4BACL,KAAK;4BACL,MAAM;4BACN,OAAO;4BACP,UAAU,CAAA,QAAS,aAAa,OAAO,MAAM,MAAM,CAAC,KAAK;4BACzD,WAAU;;;;;;;;;;;;8BAGd,ibAAC,0MAAiB;;sCAChB,ibAAC,yMAAW;4BAAC,OAAO;sCAClB,cAAA,ibAAC,oMAAM;gCACL,MAAK;gCACL,SAAQ;gCACR,UAAU;gCACV,SAAS;0CACV;;;;;;;;;;;sCAIH,ibAAC,oMAAM;4BAAC,MAAK;4BAAS,SAAS;4BAAQ,UAAU,UAAU,CAAC;sCACzD,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAMlC;KAzEgB","debugId":null}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/users/utils/avatar.ts"],"sourcesContent":["import type { Area } from 'react-easy-crop';\n\nexport type StatusMessage = {\n  type: 'success' | 'error';\n  message: string;\n};\n\nexport function getInitials(name?: string | null, fallback?: string | null) {\n  if (name && name.trim().length > 0) {\n    const parts = name.trim().split(' ');\n    if (parts.length === 1) {\n      return parts[0]?.slice(0, 2).toUpperCase();\n    }\n    return `${parts[0]?.[0] ?? ''}${parts[1]?.[0] ?? ''}`.toUpperCase();\n  }\n\n  if (fallback && fallback.length > 1) {\n    return fallback.slice(0, 2).toUpperCase();\n  }\n\n  return 'ME';\n}\n\nexport function readFileAsDataUrl(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = error => reject(error);\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction createImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.addEventListener('load', () => resolve(image));\n    image.addEventListener('error', error => reject(error));\n    image.setAttribute('crossOrigin', 'anonymous');\n    image.src = url;\n  });\n}\n\nexport async function getCroppedImageBlob(imageSrc: string, crop: Area) {\n  const image = await createImage(imageSrc);\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n\n  if (!context) {\n    throw new Error('Unable to create canvas context');\n  }\n\n  canvas.width = crop.width;\n  canvas.height = crop.height;\n\n  context.drawImage(\n    image,\n    crop.x,\n    crop.y,\n    crop.width,\n    crop.height,\n    0,\n    0,\n    crop.width,\n    crop.height\n  );\n\n  return new Promise<Blob>((resolve, reject) => {\n    canvas.toBlob(blob => {\n      if (blob) {\n        resolve(blob);\n      } else {\n        reject(new Error('Failed to crop avatar image'));\n      }\n    }, 'image/png');\n  });\n}\n"],"names":[],"mappings":";;;;;;;;AAOO,SAAS,YAAY,IAAoB,EAAE,QAAwB;IACxE,IAAI,QAAQ,KAAK,IAAI,GAAG,MAAM,GAAG,GAAG;YAKxB,SAAsB;QAJhC,MAAM,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC;QAChC,IAAI,MAAM,MAAM,KAAK,GAAG;gBACf;YAAP,QAAO,WAAA,KAAK,CAAC,EAAE,cAAR,+BAAA,SAAU,KAAK,CAAC,GAAG,GAAG,WAAW;QAC1C;YACU,UAAsB;QAAhC,OAAO,AAAC,GAAwB,OAAtB,CAAA,YAAA,UAAA,KAAK,CAAC,EAAE,cAAR,8BAAA,OAAU,CAAC,EAAE,cAAb,sBAAA,WAAiB,IAAyB,OAApB,CAAA,aAAA,WAAA,KAAK,CAAC,EAAE,cAAR,+BAAA,QAAU,CAAC,EAAE,cAAb,uBAAA,YAAiB,IAAK,WAAW;IACnE;IAEA,IAAI,YAAY,SAAS,MAAM,GAAG,GAAG;QACnC,OAAO,SAAS,KAAK,CAAC,GAAG,GAAG,WAAW;IACzC;IAEA,OAAO;AACT;AAEO,SAAS,kBAAkB,IAAU;IAC1C,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,IAAM,QAAQ,OAAO,MAAM;QAC3C,OAAO,OAAO,GAAG,CAAA,QAAS,OAAO;QACjC,OAAO,aAAa,CAAC;IACvB;AACF;AAEA,SAAS,YAAY,GAAW;IAC9B,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,QAAQ,IAAI;QAClB,MAAM,gBAAgB,CAAC,QAAQ,IAAM,QAAQ;QAC7C,MAAM,gBAAgB,CAAC,SAAS,CAAA,QAAS,OAAO;QAChD,MAAM,YAAY,CAAC,eAAe;QAClC,MAAM,GAAG,GAAG;IACd;AACF;AAEO,eAAe,oBAAoB,QAAgB,EAAE,IAAU;IACpE,MAAM,QAAQ,MAAM,YAAY;IAChC,MAAM,SAAS,SAAS,aAAa,CAAC;IACtC,MAAM,UAAU,OAAO,UAAU,CAAC;IAElC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,KAAK,GAAG,KAAK,KAAK;IACzB,OAAO,MAAM,GAAG,KAAK,MAAM;IAE3B,QAAQ,SAAS,CACf,OACA,KAAK,CAAC,EACN,KAAK,CAAC,EACN,KAAK,KAAK,EACV,KAAK,MAAM,EACX,GACA,GACA,KAAK,KAAK,EACV,KAAK,MAAM;IAGb,OAAO,IAAI,QAAc,CAAC,SAAS;QACjC,OAAO,MAAM,CAAC,CAAA;YACZ,IAAI,MAAM;gBACR,QAAQ;YACV,OAAO;gBACL,OAAO,IAAI,MAAM;YACnB;QACF,GAAG;IACL;AACF","debugId":null}},
    {"offset": {"line": 830, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/features/workspace/components/WorkspaceForm.tsx"],"sourcesContent":["'use client';\n\nimport {\n  ChangeEvent,\n  FormEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { Area } from 'react-easy-crop';\nimport type { Workspace } from '@/types/workspace';\nimport { Plus } from 'lucide-react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport GlassButton from '@/components/glass-card/GlassButton';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { WorkspaceIconCropDialog } from './WorkspaceIconCropDialog';\nimport {\n  getCroppedImageBlob,\n  getInitials,\n  readFileAsDataUrl,\n} from '@/features/users/utils/avatar';\n\ninterface WorkspaceFormProps {\n  workspace?: Workspace | null;\n  onSubmit: (payload: {\n    id: number | null;\n    title: string;\n    iconFile: File | null;\n  }) => Promise<void>;\n  onEditComplete?: () => void;\n  isLoading?: boolean;\n}\n\nexport default function WorkspaceForm({\n  workspace,\n  onSubmit,\n  onEditComplete,\n  isLoading,\n}: WorkspaceFormProps) {\n  const [open, setOpen] = useState(false);\n  const [title, setTitle] = useState(() => workspace?.title ?? '');\n  const [error, setError] = useState<string | null>(null);\n  const [iconError, setIconError] = useState<string | null>(null);\n  const [iconFile, setIconFile] = useState<File | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const [iconPreviewUrl, setIconPreviewUrl] = useState<string | null>(\n    () => workspace?.icon_url ?? null\n  );\n  const iconPreviewRef = useRef<string | null>(workspace?.icon_url ?? null);\n\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  const [cropDialogOpen, setCropDialogOpen] = useState(false);\n  const [selectedImageSrc, setSelectedImageSrc] = useState<string | null>(null);\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState<Area | null>(null);\n\n  const updateIconPreview = useCallback((preview: string | null) => {\n    if (iconPreviewRef.current && iconPreviewRef.current.startsWith('blob:')) {\n      URL.revokeObjectURL(iconPreviewRef.current);\n    }\n    iconPreviewRef.current = preview;\n    setIconPreviewUrl(preview);\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (\n        iconPreviewRef.current &&\n        iconPreviewRef.current.startsWith('blob:')\n      ) {\n        URL.revokeObjectURL(iconPreviewRef.current);\n      }\n    };\n  }, []);\n\n  const resetState = useCallback(() => {\n    setTitle(workspace?.title ?? '');\n    setError(null);\n    setIconError(null);\n    setIconFile(null);\n    updateIconPreview(workspace?.icon_url ?? null);\n    setSelectedImageSrc(null);\n    setCrop({ x: 0, y: 0 });\n    setZoom(1);\n    setCroppedAreaPixels(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [updateIconPreview, workspace]);\n\n  useEffect(() => {\n    if (!open) {\n      resetState();\n    }\n  }, [open, resetState]);\n\n  const handleDialogOpenChange = useCallback(\n    (nextOpen: boolean) => {\n      if (!nextOpen) {\n        setOpen(false);\n        resetState();\n        onEditComplete?.();\n      } else {\n        resetState();\n        setOpen(true);\n      }\n    },\n    [onEditComplete, resetState]\n  );\n\n  const handleTitleChange = useCallback(\n    (value: string) => {\n      setTitle(value);\n      if (error) {\n        setError(null);\n      }\n    },\n    [error]\n  );\n\n  const handleUploadClick = useCallback(() => {\n    fileInputRef.current?.click();\n  }, []);\n\n  const handleFileChange = useCallback(\n    async (event: ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (!file) return;\n\n      try {\n        setIconError(null);\n        const dataUrl = await readFileAsDataUrl(file);\n        setSelectedImageSrc(dataUrl);\n        setCrop({ x: 0, y: 0 });\n        setZoom(1);\n        setCroppedAreaPixels(null);\n        setCropDialogOpen(true);\n      } catch (err) {\n        console.error('Failed to read workspace icon file', err);\n        setIconError(\n          'Could not open the selected image. Please try another file.'\n        );\n      }\n    },\n    []\n  );\n\n  const handleCropDialogOpenChange = useCallback((nextOpen: boolean) => {\n    if (!nextOpen) {\n      setCropDialogOpen(false);\n      setSelectedImageSrc(null);\n      setCroppedAreaPixels(null);\n      setCrop({ x: 0, y: 0 });\n      setZoom(1);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } else {\n      setCropDialogOpen(true);\n    }\n  }, []);\n\n  const handleIconCancel = useCallback(() => {\n    handleCropDialogOpenChange(false);\n  }, [handleCropDialogOpenChange]);\n\n  const handleIconSave = useCallback(async () => {\n    if (!selectedImageSrc || !croppedAreaPixels) {\n      return;\n    }\n\n    try {\n      const croppedBlob = await getCroppedImageBlob(\n        selectedImageSrc,\n        croppedAreaPixels\n      );\n      const file = new File([croppedBlob], 'workspace-icon.png', {\n        type: 'image/png',\n      });\n      const previewUrl = URL.createObjectURL(file);\n      updateIconPreview(previewUrl);\n      setIconFile(file);\n      setIconError(null);\n      handleCropDialogOpenChange(false);\n    } catch (err) {\n      console.error('Failed to process workspace icon', err);\n      setIconError('Unable to process the selected image. Please try again.');\n    }\n  }, [\n    croppedAreaPixels,\n    handleCropDialogOpenChange,\n    selectedImageSrc,\n    updateIconPreview,\n  ]);\n\n  const handleClearSelectedIcon = useCallback(() => {\n    setIconFile(null);\n    setIconError(null);\n    updateIconPreview(workspace?.icon_url ?? null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [updateIconPreview, workspace?.icon_url]);\n\n  const initials = useMemo(\n    () => getInitials(title || workspace?.title || 'Workspace', 'Workspace'),\n    [title, workspace?.title]\n  );\n\n  const handleSubmit = useCallback(\n    async (event: FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n      setError(null);\n\n      const trimmedTitle = title.trim();\n      if (!trimmedTitle) {\n        setError('Workspace name is required');\n        return;\n      }\n\n      setIsSubmitting(true);\n      try {\n        await onSubmit({\n          id: workspace?.id ?? null,\n          title: trimmedTitle,\n          iconFile,\n        });\n        handleDialogOpenChange(false);\n      } catch (err) {\n        console.error('Failed to save workspace', err);\n        setError(\n          err instanceof Error ? err.message : 'Failed to save workspace'\n        );\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [handleDialogOpenChange, iconFile, onSubmit, title, workspace?.id]\n  );\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={handleDialogOpenChange}>\n        <DialogTrigger asChild>\n          <GlassButton\n            type='button'\n            disabled={isLoading}\n            size='icon'\n            className='size-11 disabled:cursor-not-allowed'\n          >\n            <Plus className='size-6' />\n          </GlassButton>\n        </DialogTrigger>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              {workspace ? 'Edit workspace' : 'Create new workspace'}\n            </DialogTitle>\n            <DialogDescription>\n              Give your workspace a name and optional icon.\n            </DialogDescription>\n          </DialogHeader>\n          <form onSubmit={handleSubmit} className='space-y-6'>\n            <div className='space-y-2'>\n              <Label htmlFor='workspace-title'>Workspace name</Label>\n              <Input\n                id='workspace-title'\n                placeholder='Enter workspace name'\n                value={title}\n                onChange={event => handleTitleChange(event.target.value)}\n                disabled={isSubmitting}\n                autoComplete='organization'\n                autoFocus\n              />\n            </div>\n            <div className='space-y-3'>\n              <Label>Workspace icon</Label>\n              <div className='flex items-center gap-4'>\n                <Avatar className='h-16 w-16 border border-white/10 text-xl'>\n                  {iconPreviewUrl ? (\n                    <AvatarImage\n                      src={iconPreviewUrl}\n                      alt='Workspace icon preview'\n                    />\n                  ) : (\n                    <AvatarFallback>{initials}</AvatarFallback>\n                  )}\n                </Avatar>\n                <div className='text-sm text-white/60'>\n                  <p>Recommended: square image, at least 256×256px.</p>\n                  <p>Supported formats: PNG or JPG.</p>\n                </div>\n              </div>\n              <div className='flex flex-wrap items-center gap-2'>\n                <Button\n                  type='button'\n                  variant='secondary'\n                  onClick={handleUploadClick}\n                  disabled={isSubmitting}\n                >\n                  {iconPreviewUrl ? 'Change icon' : 'Upload icon'}\n                </Button>\n                {iconPreviewUrl && iconFile && (\n                  <Button\n                    type='button'\n                    variant='ghost'\n                    onClick={handleClearSelectedIcon}\n                    disabled={isSubmitting}\n                  >\n                    Reset selection\n                  </Button>\n                )}\n              </div>\n              <input\n                ref={fileInputRef}\n                type='file'\n                accept='image/*'\n                className='hidden'\n                onChange={handleFileChange}\n              />\n              {iconError && <p className='text-sm text-red-300'>{iconError}</p>}\n            </div>\n            {error && (\n              <div className='rounded-md border border-red-500/40 bg-red-500/10 p-3 text-sm text-red-200'>\n                {error}\n              </div>\n            )}\n            <DialogFooter>\n              <DialogClose asChild>\n                <Button type='button' variant='ghost' disabled={isSubmitting}>\n                  Cancel\n                </Button>\n              </DialogClose>\n              <Button type='submit' disabled={isSubmitting}>\n                {isSubmitting\n                  ? 'Saving…'\n                  : workspace\n                    ? 'Save changes'\n                    : 'Create workspace'}\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      <WorkspaceIconCropDialog\n        open={cropDialogOpen}\n        onOpenChange={handleCropDialogOpenChange}\n        imageSrc={selectedImageSrc}\n        crop={crop}\n        zoom={zoom}\n        onCropChange={setCrop}\n        onZoomChange={setZoom}\n        onCropComplete={(_, areaPixels) => setCroppedAreaPixels(areaPixels)}\n        onSave={handleIconSave}\n        onCancel={handleIconCancel}\n        saving={false}\n        canSave={Boolean(selectedImageSrc && croppedAreaPixels)}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1401, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/components/SearchBar.tsx"],"sourcesContent":["import * as React from 'react';\nimport { MicIcon, SearchIcon } from 'lucide-react';\n\nimport GlassCard from '@/components/glass-card/GlassCard';\nimport { cn } from '@/lib/utils';\n\nexport interface SearchBarProps\n  extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'className'> {\n  className?: string;\n  containerClassName?: string;\n}\n\nconst SearchBar = React.forwardRef<HTMLInputElement, SearchBarProps>(\n  ({ containerClassName, type = 'text', className, ...inputProps }, ref) => (\n    <GlassCard\n      className={cn(\n        'flex flex-1 items-center rounded-4xl px-4 py-3',\n        containerClassName\n      )}\n    >\n      <SearchIcon className='mr-2 size-5 text-gray-400' />\n      <input\n        ref={ref}\n        type={type}\n        className={cn(\n          'w-full bg-transparent text-sm text-white outline-none placeholder-gray-500',\n          className\n        )}\n        {...inputProps}\n      />\n      <MicIcon className='ml-2 size-5 text-gray-400' />\n    </GlassCard>\n  )\n);\n\nSearchBar.displayName = 'SearchBar';\n\nexport default SearchBar;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;;;;;;AAQA,MAAM,0BAAY,+ZAAgB,MAChC,QAAkE;QAAjE,EAAE,kBAAkB,EAAE,OAAO,MAAM,EAAE,SAAS,EAAE,GAAG,YAAY;yBAC9D,ibAAC,mNAAS;QACR,WAAW,IAAA,iLAAE,EACX,kDACA;;0BAGF,ibAAC,gRAAU;gBAAC,WAAU;;;;;;0BACtB,ibAAC;gBACC,KAAK;gBACL,MAAM;gBACN,WAAW,IAAA,iLAAE,EACX,8EACA;gBAED,GAAG,UAAU;;;;;;0BAEhB,ibAAC,uQAAO;gBAAC,WAAU;;;;;;;;;;;;;;AAKzB,UAAU,WAAW,GAAG;uCAET","debugId":null}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///Users/air13/code/cogni/cogni-frontend/apps/web/src/app/%28private%29/workspace/page.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useState } from 'react';\nimport { useWorkspaces, useWorkspaceMutations } from '@/hooks/useWorkspace';\nimport WorkspaceList from '@/features/workspace/components/WorkspaceList';\nimport WorkspaceForm from '@/features/workspace/components/WorkspaceForm';\nimport { uploadWorkspaceIcon } from '@/lib/api/workspaceApi';\nimport type { Workspace } from '@/types/workspace';\nimport SearchBar from '@/components/SearchBar';\n\nexport default function WorkspacePage() {\n  const { workspaces, isLoading, error } = useWorkspaces();\n  const { create, update } = useWorkspaceMutations();\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const filteredWorkspaces = useMemo(() => {\n    if (!workspaces) {\n      return [];\n    }\n\n    const query = searchQuery.trim().toLowerCase();\n\n    if (!query) {\n      return workspaces;\n    }\n\n    return workspaces.filter(workspace => {\n      const title = (workspace.title || 'Untitled Workspace').toLowerCase();\n      const typeLabel = workspace.type.toLowerCase();\n      return title.includes(query) || typeLabel.includes(query);\n    });\n  }, [workspaces, searchQuery]);\n\n  const isSearching = searchQuery.trim().length > 0;\n\n  const handleSubmit = async ({\n    id,\n    title,\n    iconFile,\n  }: {\n    id: number | null;\n    title: string;\n    iconFile: File | null;\n  }) => {\n    if (id) {\n      const updates: Partial<Pick<Workspace, 'title' | 'icon_url'>> = {\n        title,\n      };\n\n      if (iconFile) {\n        const { iconUrl } = await uploadWorkspaceIcon(id, iconFile);\n        updates.icon_url = iconUrl;\n      }\n\n      await update(id, updates);\n      return;\n    }\n\n    const workspace = await create(title);\n\n    if (iconFile && workspace?.id) {\n      const { iconUrl } = await uploadWorkspaceIcon(workspace.id, iconFile);\n      await update(workspace.id, { icon_url: iconUrl });\n    }\n  };\n\n  if (error) {\n    return (\n      <div className='min-h-screen bg-black flex items-center justify-center'>\n        <div className='text-center'>\n          <div className='text-red-400 text-xl mb-2'>\n            Failed to load workspaces\n          </div>\n          <div className='text-gray-400 text-sm'>\n            {error instanceof Error ? error.message : 'Unknown error'}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='flex flex-col h-full relative overflow-hidden'>\n      {/* 固定ヘッダー（検索バー + 新規作成ボタン） */}\n      <div className='relative z-20 px-4 md:px-6 pt-4 md:pt-6 pb-4'>\n        <div className='flex w-full items-center justify-between gap-3'>\n          <SearchBar\n            placeholder='Search workspaces...'\n            value={searchQuery}\n            onChange={event => setSearchQuery(event.target.value)}\n          />\n          <WorkspaceForm onSubmit={handleSubmit} isLoading={isLoading} />\n        </div>\n      </div>\n\n      {/* スクロール可能エリア */}\n      <div\n        className='relative z-10 flex-1 overflow-y-auto px-4 md:px-6 pb-4'\n        style={{\n          willChange: 'scroll-position',\n          transform: 'translateZ(0)',\n          WebkitOverflowScrolling: 'touch',\n        }}\n      >\n        {isLoading && (\n          <div className='flex items-center justify-center py-12'>\n            <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-white'></div>\n          </div>\n        )}\n\n        {!isLoading &&\n          workspaces &&\n          (filteredWorkspaces.length > 0 || !isSearching) && (\n            <WorkspaceList workspaces={filteredWorkspaces} />\n          )}\n\n        {!isLoading &&\n          workspaces &&\n          filteredWorkspaces.length === 0 &&\n          isSearching && (\n            <div className='rounded-2xl border border-white/10 bg-white/5 p-8 text-center text-white/70'>\n              No workspaces found matching &quot;{searchQuery.trim()}&quot;.\n            </div>\n          )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAEA;;;AARA;;;;;;;AAUe,SAAS;;IACtB,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAA,qMAAa;IACtD,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6MAAqB;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6ZAAQ,EAAC;IAE/C,MAAM,qBAAqB,IAAA,4ZAAO;qDAAC;YACjC,IAAI,CAAC,YAAY;gBACf,OAAO,EAAE;YACX;YAEA,MAAM,QAAQ,YAAY,IAAI,GAAG,WAAW;YAE5C,IAAI,CAAC,OAAO;gBACV,OAAO;YACT;YAEA,OAAO,WAAW,MAAM;6DAAC,CAAA;oBACvB,MAAM,QAAQ,CAAC,UAAU,KAAK,IAAI,oBAAoB,EAAE,WAAW;oBACnE,MAAM,YAAY,UAAU,IAAI,CAAC,WAAW;oBAC5C,OAAO,MAAM,QAAQ,CAAC,UAAU,UAAU,QAAQ,CAAC;gBACrD;;QACF;oDAAG;QAAC;QAAY;KAAY;IAE5B,MAAM,cAAc,YAAY,IAAI,GAAG,MAAM,GAAG;IAEhD,MAAM,eAAe;YAAO,EAC1B,EAAE,EACF,KAAK,EACL,QAAQ,EAKT;QACC,IAAI,IAAI;YACN,MAAM,UAA0D;gBAC9D;YACF;YAEA,IAAI,UAAU;gBACZ,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,gNAAmB,EAAC,IAAI;gBAClD,QAAQ,QAAQ,GAAG;YACrB;YAEA,MAAM,OAAO,IAAI;YACjB;QACF;QAEA,MAAM,YAAY,MAAM,OAAO;QAE/B,IAAI,aAAY,sBAAA,gCAAA,UAAW,EAAE,GAAE;YAC7B,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,gNAAmB,EAAC,UAAU,EAAE,EAAE;YAC5D,MAAM,OAAO,UAAU,EAAE,EAAE;gBAAE,UAAU;YAAQ;QACjD;IACF;IAEA,IAAI,OAAO;QACT,qBACE,ibAAC;YAAI,WAAU;sBACb,cAAA,ibAAC;gBAAI,WAAU;;kCACb,ibAAC;wBAAI,WAAU;kCAA4B;;;;;;kCAG3C,ibAAC;wBAAI,WAAU;kCACZ,iBAAiB,QAAQ,MAAM,OAAO,GAAG;;;;;;;;;;;;;;;;;IAKpD;IAEA,qBACE,ibAAC;QAAI,WAAU;;0BAEb,ibAAC;gBAAI,WAAU;0BACb,cAAA,ibAAC;oBAAI,WAAU;;sCACb,ibAAC,kMAAS;4BACR,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAA,QAAS,eAAe,MAAM,MAAM,CAAC,KAAK;;;;;;sCAEtD,ibAAC,+NAAa;4BAAC,UAAU;4BAAc,WAAW;;;;;;;;;;;;;;;;;0BAKtD,ibAAC;gBACC,WAAU;gBACV,OAAO;oBACL,YAAY;oBACZ,WAAW;oBACX,yBAAyB;gBAC3B;;oBAEC,2BACC,ibAAC;wBAAI,WAAU;kCACb,cAAA,ibAAC;4BAAI,WAAU;;;;;;;;;;;oBAIlB,CAAC,aACA,cACA,CAAC,mBAAmB,MAAM,GAAG,KAAK,CAAC,WAAW,mBAC5C,ibAAC,+NAAa;wBAAC,YAAY;;;;;;oBAG9B,CAAC,aACA,cACA,mBAAmB,MAAM,KAAK,KAC9B,6BACE,ibAAC;wBAAI,WAAU;;4BAA8E;4BACvD,YAAY,IAAI;4BAAG;;;;;;;;;;;;;;;;;;;AAMrE;GArHwB;;QACmB,qMAAa;QAC3B,6MAAqB;;;KAF1B","debugId":null}}]
}