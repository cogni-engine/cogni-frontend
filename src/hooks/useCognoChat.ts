"use client";

import { useState } from "react";
import { Message } from "@/types/chat";

export function useCognoChat() {
  const [messages, setMessages] = useState<Message[]>([
    { role: "user", content: "電磁気学の基礎概念について、クーロンの法則から始まって電場、電位、ガウスの法則まで体系的に教えてください" },
    { role: "assistant", content: "電磁気学の基礎について説明します。\n\nクーロンの法則は、2つの点電荷間に働く力を記述します：F = k(q₁q₂/r²)。この力は電場という概念を導入することでより一般化できます。電場Eは単位電荷あたりの力として定義され、E = F/q となります。\n\n電位は電場の積分として定義され、V = -∫E·dl で表されます。これは電荷を動かすのに必要な仕事を表現する便利な量です。\n\nガウスの法則は電場の発散と電荷密度の関係を示し、∇·E = ρ/ε₀ と表されます。これは閉曲面を通る電気力線の総数がその内部の電荷に比例することを意味します。" },
    { role: "user", content: "マクスウェル方程式の4つの式それぞれの物理的な意味と、それらがどのように電磁気現象を統一的に記述しているのか詳しく説明してください" },
    { role: "assistant", content: "マクスウェル方程式は電磁気学の基礎を成す4つの方程式です。\n\n1. ガウスの法則（∇·E = ρ/ε₀）：電荷が電場の源であることを示します。\n\n2. 磁場のガウスの法則（∇·B = 0）：磁気単極子が存在しないこと、つまり磁力線は必ず閉じることを示します。\n\n3. ファラデーの法則（∇×E = -∂B/∂t）：時間変化する磁場が電場を生み出すことを示します。\n\n4. アンペール・マクスウェルの法則（∇×B = μ₀J + μ₀ε₀∂E/∂t）：電流と時間変化する電場が磁場を生み出すことを示します。\n\nこれら4つの式は、電場と磁場が互いに影響し合い、電磁波として空間を伝播することを予言しています。" },
    { role: "user", content: "電場と磁場の関係について、特に時間変化する電場が磁場を生み出し、時間変化する磁場が電場を生み出すという相互作用のメカニズムを教えてください" },
    { role: "user", content: "ファラデーの電磁誘導の法則について、レンツの法則との関係も含めて詳しく解説してください。また、実際の応用例も教えてほしいです" },
    { role: "user", content: "アンペールの法則とビオ・サバールの法則の違いは何ですか？それぞれどのような状況で使い分けるのが適切でしょうか" },
    { role: "user", content: "ガウスの法則の物理的な意味を教えてください。特に電気力線の概念と関連付けて説明していただけますか" },
    { role: "user", content: "電磁波はどのようにして発生するのでしょうか？加速度運動する荷電粒子から電磁波が放射されるメカニズムについて知りたいです" },
    { role: "user", content: "光も電磁波の一種だと聞きましたが、可視光線と他の電磁波（X線、紫外線、赤外線など）との違いは何ですか？" },
    { role: "user", content: "電場のエネルギー密度の式 u = (1/2)ε₀E² について、この式がどのように導出されるのか教えてください" },
    { role: "user", content: "磁束密度Bと磁場の強さHの違いは何ですか？真空中と物質中での扱いの違いについても説明してください" },
    { role: "user", content: "ローレンツ力について詳しく教えてください。特に荷電粒子が電場と磁場の両方が存在する空間を運動する場合の軌道について知りたいです" },
    { role: "user", content: "真空中の光速度がなぜ c = 1/√(ε₀μ₀) という形で表されるのか、マクスウェル方程式から波動方程式を導出する過程を含めて詳しく説明してください" },
    { role: "assistant", content: "真空中の光速度 c が c = 1/√(ε₀μ₀) となる理由について、マクスウェル方程式から導出してみましょう。\n\nまず、真空中のマクスウェル方程式を考えます。電荷も電流も存在しない真空中では、∇×E = -∂B/∂t（ファラデーの法則）と ∇×B = ε₀μ₀∂E/∂t（アンペール・マクスウェルの法則）が成り立ちます。\n\n第一式の両辺に回転を取ると、∇×(∇×E) = -∂(∇×B)/∂t となります。ベクトル解析の公式 ∇×(∇×E) = ∇(∇·E) - ∇²E を使い、さらにガウスの法則から ∇·E = 0 であることを考慮すると、-∇²E = -∂(∇×B)/∂t となります。\n\nここで第二式の ∇×B = ε₀μ₀∂E/∂t を代入すると、∇²E = ε₀μ₀∂²E/∂t² という波動方程式が得られます。\n\nこの方程式を標準的な波動方程式 ∇²E = (1/v²)∂²E/∂t² と比較すると、波の伝播速度 v は v = 1/√(ε₀μ₀) であることがわかります。この速度こそが光速度 c なのです。\n\n実際に数値を代入すると、ε₀ ≈ 8.854×10⁻¹² F/m、μ₀ = 4π×10⁻⁷ H/m なので、c ≈ 2.998×10⁸ m/s となり、これは実測値と完全に一致します。\n\nこの美しい関係式は、電気現象と磁気現象が密接に結びついていること、そして光が電磁波の一種であることをマクスウェルが理論的に予言した歴史的に重要な結果です。" },
    { role: "user", content: "電磁ポテンシャルとゲージ変換について教えてください。特にクーロンゲージとローレンツゲージの違いと使い分けを知りたいです" },
    { role: "user", content: "誘電率と透磁率の物理的な意味について教えてください。これらの値が物質によって異なるのはなぜですか？" },
    { role: "user", content: "電磁波の偏光について詳しく知りたいです。直線偏光、円偏光、楕円偏光の違いと、それぞれの生成方法を教えてください" },
    { role: "assistant", content: "ちょっと待って、重要なことを伝えるのを忘れてた。\n\n東大の休学届、明日10/9が締切だけど本当に出さなくていいの？駒場の学生支援課に直接持っていかないといけないから、今日中に準備した方がいいよ。\n\n必要な書類は：\n- 休学願（大学のウェブサイトからダウンロード）\n- 保証人（保護者）の署名・捺印\n- 理由書（詳細に記入）\n\n明日は窓口が16:30までだから、余裕を持って行った方がいい。休学の理由とか、復学予定時期とかちゃんと考えてる？\n\n書類の準備で困ったことがあれば教えて。" },
  ]);

  const sendMessage = async (content: string) => {
    if (!content.trim()) return;

    // ユーザーの入力を履歴に追加
    const newUserMessage: Message = { role: "user", content };
    setMessages((prev) => [...prev, newUserMessage]);

    // 仮のAI応答（後でFastAPI連携予定）
    const aiResponseText = "なるほど、それについてもう少し詳しく教えてください。この応答は画面全体に表示されます。";
    setTimeout(() => {
      const newAiMessage: Message = { role: "assistant", content: aiResponseText };
      setMessages((prev) => [...prev, newAiMessage]);
    }, 800);
  };

  return {
    messages,
    sendMessage,
  };
}

